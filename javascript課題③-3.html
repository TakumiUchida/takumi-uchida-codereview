<!DOCTYPE>
<html>
<head>
  <meta charset="UTF-8">
  <title>javascript課題➂-1</title>
</head>
<body>
  <h1>ToDoリスト</h1>
<form id="radiobutton">
  <input type="radio" name="status" checked="checked">すべて
  <input type="radio" name="status">作業中
  <input type="radio" name="status">完了
</form>
    <table id="tasktable">
      <thead>
        <tr>
          <th>ID</th>
          <th>コメント</th>
          <th>状態</th>
        </tr>
      </thead>
      <tbody id="list">
      </tbody>
    </table>
  <form name="inputform">
    <h1>新規タスクの追加</h1>
    <input type="text" id="add">
    <input type="button" value="追加" id="addbutton">
  </form>
</body>
</html>

<script type="text/javascript">
  const tasks = [];
  // 追加
  const el = document.getElementById("addbutton");
  el.addEventListener("click" , function addTask() {
    const list = document.getElementById('list');
    const content =  document.getElementById('add').value;
    tasks.push(content);
    document.getElementById('add').value = '';
    output();
}, false);

function output() {
let html=''
for(let i=0; i<tasks.length; i++){
  html += `<tr id="nowWorking"><td>${i}</td><td>${tasks[i]}</td><td><input type="button" id="working${i}" value="作業中"><input type="button" class="delete" value="削除"></td></tr>`;
}
list.innerHTML = html;

  // 削除処理
  const el2 = document.getElementsByClassName('delete');
  for(let num=0; num<el2.length; num++) {
  el2[num].addEventListener("click", function deleteTask() {
    const getId = this.getAttribute('id');
    tasks.splice(getId,1);
    output();
  }, false);
  }

  // 状態を変更
  const tr = document.getElementById('nowWorking');
  for(let num2=0; num2<tasks.length; num2++) {
    const el3 = document.getElementById('working' + num2);
    el3.addEventListener("click", function changeType() {
      if(this.value == '作業中') {
        this.value = '完了';
        tr.setAttribute("id", "finished");
      }else if(this.value == '完了') {
        this.value = '作業中';
        tr.setAttribute("id","nowWorking");

      }
    }, false);
  }

  // ラジオボタンから取得
  const getWorking = document.getElementById('nowWorking')
  const getFinished = document.getElementById('finished')
  const element = document.getElementById('radiobutton');

}




</script>

<style>
  #delete {
    margin-left:5px;
  }
  input[type="button"] {
    border-radius: 5px;
    }
    tr {
      text-align: left;
    }
</style>
